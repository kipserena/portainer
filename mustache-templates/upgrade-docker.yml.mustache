version: "3"

services:
  updater:
    image: {{updaterImage}}{{^updaterImage}}portainer/portainer-updater:latest{{/updaterImage}}
    labels:
      - io.portainer.hideStack=true 
      - io.portainer.updater=true 
    command: ["portainer", 
      "--image", "{{image}}{{^image}}portainer/portainer-ee:latest{{/image}}",
      "--env-type", "{{envType}}{{^envType}}standalone{{/envType}}",
      "--license", "{{license}}"
    ]
    {{#skipPullImage}}
    environment:
      - SKIP_PULL=1
    {{/skipPullImage}}
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      {{! - \\.\pipe\docker_engine:\\.\pipe\docker_engine }}